"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[93],{214:(t,a,e)=>{e.r(a),e.d(a,{default:()=>i});const s={components:{},directives:{},props:["session_user","system_types"],data:function(){return{pagination:{page:null,pages:null,page_limit:20,page_offset:null,records:null},search:{name:null,job_type:null,active:null,selected:{id:null},result:[]},whatsapp_inputs:[],whatsapp_texts:[]}},computed:{job_type:function(){return this.search.job_type},active:function(){return this.search.active},page_limit:function(){return this.pagination.page_limit},search_result:function(){return this.search.result}},watch:{job_type:function(){this.pagination.records&&this.getList("param")},active:function(){this.pagination.records&&this.getList("param")},page_limit:function(){this.pagination.records&&this.getList("param")},search_result:function(){for(var t=[],a=[],e=0;e<this.search_result.length;e++)t[e]="",a[e]="";this.whatsapp_inputs=JSON.parse(JSON.stringify(t)),this.whatsapp_texts=JSON.parse(JSON.stringify(a))}},created:function(){this.$emit("isLoading",!1)},mounted:function(){this.getList()},updated:function(){},activated:function(){},deactivated:function(){},methods:{getList:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.$emit("isLoading",!0),!this.pagination.records||"search"!=a&&"param"!=a&&"enter"!=a||(this.pagination.page=null,this.pagination.pages=null,this.pagination.page_offset=null,this.pagination.records=null,this.search.result=[],this.search.selected={id:null}),api.listEmployees(this.search.name,this.search.job_type,this.search.active,this.pagination.page,this.pagination.page_limit).then((function(a){if(a.data.success)t.search.result=a.data.result,t.pagination.page=a.data.page,t.pagination.pages=a.data.pages,t.pagination.page_limit=a.data.page_limit,t.pagination.page_offset=a.data.page_offset,t.pagination.records=a.data.records;else switch(a.data.error){case"sql":t.$emit("showAlert","error","SQL inválido, informe o suporte.");break;case"empty":t.$emit("showAlert","warning","Nenhum resultado encontrado.")}})).catch((function(a){console.log(a),t.$emit("showAlert","error","Ocorreu um erro no processo: ".concat(a))})).finally((function(){t.$emit("isLoading",!1)}))},selectRow:function(t){this.search.selected=t},getPage:function(t){"next"==t&&this.pagination.page++,"prev"==t&&this.pagination.page--,this.getList("pagination")}}};const i=(0,e(900).Z)(s,(function(){var t=this,a=t._self._c;return a("div",{staticClass:"container-lg vstack flex-wrap gap-4 py-4"},[a("h1",{staticClass:"text-center text-light fs-3 m-0"},[t._v(" Funcionários ")]),t._v(" "),a("div",{staticClass:"vstack gap-3"},[a("div",{staticClass:"input-group shadow-plus"},[a("div",{staticClass:"form-floating flex-fill",staticStyle:{width:"220px","min-width":"0"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search.name,expression:"search.name"}],staticClass:"form-control bg-light-smooth",attrs:{type:"search",placeholder:"Nome"},domProps:{value:t.search.name},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getList("enter")},input:function(a){a.target.composing||t.$set(t.search,"name",a.target.value)}}}),t._v(" "),a("label",[t._v("Nome")])]),t._v(" "),a("div",{staticClass:"form-floating flex-fill",staticStyle:{width:"190px","min-width":"0"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.search.job_type,expression:"search.job_type"}],staticClass:"form-select bg-light-smooth",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.search,"job_type",a.target.multiple?e:e[0])}}},[a("option",{domProps:{value:null}},[t._v("Qualquer cargo")]),t._v(" "),t._l(t.system_types.job,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v("\n            "+t._s(e.label)+"\n          ")])}))],2),t._v(" "),a("label",[t._v("\n          Cargo\n        ")])]),t._v(" "),a("div",{staticClass:"form-floating flex-fill",staticStyle:{width:"130px","min-width":"0"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.search.active,expression:"search.active"}],staticClass:"form-select bg-light-smooth",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.search,"active",a.target.multiple?e:e[0])}}},[a("option",{domProps:{value:null}},[t._v("Qualquer situação")]),t._v(" "),a("option",{domProps:{value:0}},[t._v("Inativo")]),t._v(" "),a("option",{domProps:{value:1}},[t._v("Ativo")])]),t._v(" "),a("label",[t._v("\n          Situação cadastral\n        ")])]),t._v(" "),a("div",{staticClass:"form-floating flex-fill",staticStyle:{width:"130px","min-width":"0"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.pagination.page_limit,expression:"pagination.page_limit"}],staticClass:"form-select bg-light-smooth",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.pagination,"page_limit",a.target.multiple?e:e[0])}}},[a("option",{domProps:{value:20}},[t._v("20")]),t._v(" "),a("option",{domProps:{value:40}},[t._v("40")]),t._v(" "),a("option",{domProps:{value:60}},[t._v("60")])]),t._v(" "),a("label",[t._v("\n          Resultados por página\n        ")])]),t._v(" "),a("button",{staticClass:"btn btn-info",on:{click:function(a){return t.getList("search")}}},[a("i",{staticClass:"fa-solid fa-magnifying-glass me-2"}),t._v("\n        Pesquisar\n      ")])]),t._v(" "),a("div",{staticClass:"border border-light border-opacity-25 shadow-plus"},[a("table",{staticClass:"table table-dark table-hover m-0"},[t._m(0),t._v(" "),a("tbody",t._l(t.search.result,(function(e,s){return a("tr",{key:e.id,class:{"table-active":t.search.selected.id==e.id},on:{click:function(a){return t.selectRow(e)}}},[a("td",{staticClass:"vstack"},[a("div",{staticClass:"hstack justify-content-between"},[t._v("\n                "+t._s(e.name)+"\n                "),a("span",{staticClass:"badge",class:{"bg-success":1==e.active,"bg-danger":0==e.active}},[t._v("\n                  "+t._s(1==e.active?"Ativo":"Inativo")+"\n                ")])]),t._v(" "),a("small",{staticClass:"text-light text-opacity-50"},[t._v("\n                "+t._s(e.job)+"\n              ")])]),t._v(" "),e.phone?a("td",{staticClass:"font-monospace"},[a("div",{staticClass:"dropdown d-inline"},[t._m(1,!0),t._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-dark border border-light border-opacity-25 shadow-plus"},[a("div",{staticClass:"vstack text-dark gap-2 px-3",staticStyle:{width:"500px"}},[a("div",{staticClass:"form-floating"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.whatsapp_inputs[s],expression:"whatsapp_inputs[index]"}],staticClass:"form-control",staticStyle:{height:"125px"},attrs:{name:"body",placeholder:"Mensagem"},domProps:{value:t.whatsapp_inputs[s]},on:{input:[function(a){a.target.composing||t.$set(t.whatsapp_inputs,s,a.target.value)},function(a){t.whatsapp_texts[s]=encodeURIComponent(t.whatsapp_inputs[s])}]}}),t._v(" "),a("label",[t._v("Texto da mensagem")])])]),t._v(" "),a("hr",{staticClass:"dropdown-divider"}),t._v(" "),a("div",{staticClass:"hstack justify-content-end gap-2 px-3"},[a("a",{staticClass:"btn btn-orange",attrs:{href:"https://wa.me/%2B55".concat(e.phone,"?text=").concat(t.whatsapp_texts[s]),target:"_blank"}},[a("i",{staticClass:"fa-solid fa-up-right-from-square me-1"}),t._v("\n                      WhatsApp\n                    ")])])])]),t._v("\n              "+t._s(t._f("filter_phone")(e.phone))+"\n            ")]):t._e(),t._v(" "),e.phone?t._e():a("td",[t._v("Não possui")]),t._v(" "),e.email?a("td",[a("div",{staticClass:"dropdown d-inline"},[t._m(2,!0),t._v(" "),a("form",{staticClass:"dropdown-menu dropdown-menu-dark border border-light border-opacity-25 shadow-plus",attrs:{action:"mailto:".concat(e.email),method:"GET",enctype:"text/plain",target:"_blank"}},[t._m(3,!0),t._v(" "),a("hr",{staticClass:"dropdown-divider"}),t._v(" "),t._m(4,!0)])]),t._v("\n              "+t._s(e.email)+"\n            ")]):t._e(),t._v(" "),e.email?t._e():a("td",[t._v("Não possui")]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-orange",on:{click:function(a){return t.$emit("profileAction","profile",{id_employee:e.id,tab:"info"})}}},[a("i",{staticClass:"fa-solid fa-up-right-from-square"})])])])})),0)])]),t._v(" "),a("div",{staticClass:"hstack justify-content-between"},[t.pagination.records?a("div",[a("span",{staticClass:"text-bg-dark border border-light border-opacity-25 rounded p-2 shadow-plus"},[t._v("\n          Total "+t._s(t.pagination.records?t.pagination.records:0)+"\n        ")])]):t._e(),t._v(" "),t.pagination.pages>1?a("div",{staticClass:"input-group shadow-plus",staticStyle:{width:"fit-content"}},[a("button",{staticClass:"btn btn-info",attrs:{disabled:!t.pagination.page},on:{click:function(a){return t.getPage("prev")}}},[a("i",{staticClass:"fa-solid fa-chevron-left"})]),t._v(" "),a("span",{staticClass:"input-group-text bg-light-smooth"},[t._v("\n          "+t._s("Pág ".concat(t.pagination.page+1," de ").concat(t.pagination.pages))+"\n        ")]),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{disabled:t.pagination.page==t.pagination.pages-1},on:{click:function(a){return t.getPage("next")}}},[a("i",{staticClass:"fa-solid fa-chevron-right"})])]):t._e()])])])}),[function(){var t=this,a=t._self._c;return a("thead",[a("tr",{staticClass:"fw-bold"},[a("td",[t._v("Funcionário")]),t._v(" "),a("td",[t._v("Telefone")]),t._v(" "),a("td",[t._v("E-mail")]),t._v(" "),a("td",[t._v("Perfil")])])])},function(){var t=this._self._c;return t("button",{staticClass:"btn btn-orange dropdown-toggle me-2",attrs:{"data-bs-toggle":"dropdown","data-bs-auto-close":"outside"}},[t("i",{staticClass:"fa-brands fa-whatsapp"})])},function(){var t=this._self._c;return t("button",{staticClass:"btn btn-orange dropdown-toggle me-2",attrs:{"data-bs-toggle":"dropdown","data-bs-auto-close":"outside"}},[t("i",{staticClass:"fa-regular fa-envelope"})])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"vstack text-dark gap-2 px-3",staticStyle:{width:"500px"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[t._v("Assunto")]),t._v(" "),a("div",{staticClass:"form-floating"},[a("input",{staticClass:"form-control",attrs:{name:"subject",placeholder:"Assunto",type:"text"}}),t._v(" "),a("label",[t._v("Assunto do E-mail")])])]),t._v(" "),a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[t._v("cc")]),t._v(" "),a("div",{staticClass:"form-floating"},[a("input",{staticClass:"form-control",attrs:{name:"cc",placeholder:"Cópia",type:"email"}}),t._v(" "),a("label",[t._v("Enviar cópia para")])])]),t._v(" "),a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text"},[t._v("bcc")]),t._v(" "),a("div",{staticClass:"form-floating"},[a("input",{staticClass:"form-control",attrs:{name:"bcc",placeholder:"Cópia oculta",type:"email"}}),t._v(" "),a("label",[t._v("Enviar cópia oculta para")])])]),t._v(" "),a("div",{staticClass:"form-floating"},[a("textarea",{staticClass:"form-control",staticStyle:{height:"125px"},attrs:{name:"body",placeholder:"Mensagem"}}),t._v(" "),a("label",[t._v("Texto da mensagem")])])])},function(){var t=this._self._c;return t("div",{staticClass:"hstack justify-content-end px-3"},[t("button",{staticClass:"btn btn-orange",attrs:{type:"submit",value:"Preparar E-mail"}},[t("i",{staticClass:"fa-solid fa-up-right-from-square me-1"}),this._v("\n                      E-mail\n                    ")])])}],!1,null,null,null).exports},900:(t,a,e)=>{function s(t,a,e,s,i,n,o,r){var l,c="function"==typeof t?t.options:t;if(a&&(c.render=a,c.staticRenderFns=e,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var p=c.render;c.render=function(t,a){return l.call(a),p(t,a)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}e.d(a,{Z:()=>s})}}]);