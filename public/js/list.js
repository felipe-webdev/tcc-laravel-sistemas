"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[93],{747:(t,e,i)=>{i.r(e),i.d(e,{default:()=>n});const a={components:{},directives:{},props:["session_user","system_types"],data:function(){return{pagination:{page:null,pages:null,page_limit:2,page_offset:null,records:null},search:{name:null,job_type:null,active:null,selected:{id:null},result:[]}}},computed:{job_type:function(){return this.search.job_type},active:function(){return this.search.active},page_limit:function(){return this.pagination.page_limit}},watch:{job_type:function(){this.pagination.records&&this.getList("param")},active:function(){this.pagination.records&&this.getList("param")},page_limit:function(){this.pagination.records&&this.getList("param")}},created:function(){this.$emit("isLoading",!1)},mounted:function(){},updated:function(){},activated:function(){},deactivated:function(){},methods:{getList:function(t){var e=this;this.$emit("isLoading",!0),!this.pagination.records||"search"!=t&&"param"!=t&&"enter"!=t||(this.pagination.page=null,this.pagination.pages=null,this.pagination.page_offset=null,this.pagination.records=null,this.search.result=[],this.search.selected={id:null}),api.listEmployees(this.search.name,this.search.job_type,this.search.active,this.pagination.page,this.pagination.page_limit).then((function(t){if(t.data.success)e.search.result=t.data.result,e.pagination.page=t.data.page,e.pagination.pages=t.data.pages,e.pagination.page_limit=t.data.page_limit,e.pagination.page_offset=t.data.page_offset,e.pagination.records=t.data.records;else switch(t.data.error){case"sql":e.$emit("showAlert","error","SQL inválido, informe o suporte.");break;case"empty":e.$emit("showAlert","warning","Nenhum resultado encontrado.")}})).catch((function(t){console.log(t),e.$emit("showAlert","error","Ocorreu um erro no processo: ".concat(t))})).finally((function(){e.$emit("isLoading",!1)}))},selectRow:function(t){this.search.selected=t},getPage:function(t){"next"==t&&this.pagination.page++,"prev"==t&&this.pagination.page--,this.getList("pagination")}}};const n=(0,i(900).Z)(a,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-lg vstack flex-wrap gap-4 py-4"},[e("h1",{staticClass:"text-center text-light fs-3 m-0"},[t._v(" Listagem ")]),t._v(" "),e("div",{staticClass:"vstack gap-3"},[e("div",{staticClass:"input-group shadow-plus"},[e("div",{staticClass:"form-floating flex-fill",staticStyle:{width:"220px","min-width":"0"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search.name,expression:"search.name"}],staticClass:"form-control bg-light-smooth",attrs:{type:"text",placeholder:"Nome"},domProps:{value:t.search.name},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList("enter")},input:function(e){e.target.composing||t.$set(t.search,"name",e.target.value)}}}),t._v(" "),e("label",[t._v("Nome")])]),t._v(" "),e("div",{staticClass:"form-floating flex-fill",staticStyle:{width:"190px","min-width":"0"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.search.job_type,expression:"search.job_type"}],staticClass:"form-select bg-light-smooth",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.search,"job_type",e.target.multiple?i:i[0])}}},[e("option",{domProps:{value:null}},[t._v("Qualquer cargo")]),t._v(" "),t._l(t.system_types.job,(function(i){return e("option",{key:i.value,domProps:{value:i.value}},[t._v("\n            "+t._s(i.label)+"\n          ")])}))],2),t._v(" "),e("label",[t._v("\n          Cargo\n        ")])]),t._v(" "),e("div",{staticClass:"form-floating flex-fill",staticStyle:{width:"130px","min-width":"0"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.search.active,expression:"search.active"}],staticClass:"form-select bg-light-smooth",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.search,"active",e.target.multiple?i:i[0])}}},[e("option",{domProps:{value:null}},[t._v("Qualquer situação")]),t._v(" "),e("option",{domProps:{value:0}},[t._v("Inativo")]),t._v(" "),e("option",{domProps:{value:1}},[t._v("Ativo")])]),t._v(" "),e("label",[t._v("\n          Situação cadastral\n        ")])]),t._v(" "),e("div",{staticClass:"form-floating flex-fill",staticStyle:{width:"130px","min-width":"0"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.pagination.page_limit,expression:"pagination.page_limit"}],staticClass:"form-select bg-light-smooth",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.pagination,"page_limit",e.target.multiple?i:i[0])}}},[e("option",{domProps:{value:2}},[t._v("20")]),t._v(" "),e("option",{domProps:{value:4}},[t._v("40")]),t._v(" "),e("option",{domProps:{value:6}},[t._v("60")])]),t._v(" "),e("label",[t._v("\n          Resultados por página\n        ")])]),t._v(" "),e("button",{staticClass:"btn btn-info",on:{click:function(e){return t.getList("search")}}},[e("i",{staticClass:"fa-solid fa-magnifying-glass me-2"}),t._v("\n        Pesquisar\n      ")])]),t._v(" "),e("div",{staticClass:"border border-light border-opacity-25 rounded shadow-plus"},[e("table",{staticClass:"table table-dark table-hover m-0"},[t._m(0),t._v(" "),e("tbody",t._l(t.search.result,(function(i){return e("tr",{key:i.id,class:{"table-active":t.search.selected.id==i.id},on:{click:function(e){return t.selectRow(i)}}},[e("td",[t._v(t._s(i.name))]),t._v(" "),e("td",[t._v(t._s(i.job))]),t._v(" "),e("td",[t._v(t._s(1==i.active?"Ativo":"Inativo"))]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-outline-light me-2",on:{click:function(e){return t.$emit("profileAction","profile",{id_employee:i.id,tab:"user"})}}},[e("i",{staticClass:"fa-solid fa-up-right-from-square"})]),t._v("\n              "+t._s("true"===i.is_user?"Sim":"Não")+"\n            ")]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-outline-light me-2",on:{click:function(e){return t.$emit("profileAction","profile",{id_employee:i.id,tab:"family"})}}},[e("i",{staticClass:"fa-solid fa-up-right-from-square"})]),t._v("\n              "+t._s(i.family)+"\n            ")]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-outline-light",on:{click:function(e){return t.$emit("profileAction","profile",{id_employee:i.id,tab:"info"})}}},[e("i",{staticClass:"fa-solid fa-up-right-from-square"})])])])})),0)])]),t._v(" "),e("div",{staticClass:"hstack justify-content-between"},[t.pagination.records?e("div",[e("span",{staticClass:"text-bg-dark border border-light border-opacity-25 rounded p-2 shadow-plus"},[t._v("\n          Total "+t._s(t.pagination.records?t.pagination.records:0)+"\n        ")])]):t._e(),t._v(" "),t.pagination.pages>1?e("div",{staticClass:"input-group shadow-plus",staticStyle:{width:"fit-content"}},[e("button",{staticClass:"btn btn-info",attrs:{disabled:!t.pagination.page},on:{click:function(e){return t.getPage("prev")}}},[e("i",{staticClass:"fa-solid fa-chevron-left"})]),t._v(" "),e("span",{staticClass:"input-group-text bg-light-smooth"},[t._v("\n          "+t._s("Pág ".concat(t.pagination.page+1," de ").concat(t.pagination.pages))+"\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-info",attrs:{disabled:t.pagination.page==t.pagination.pages-1},on:{click:function(e){return t.getPage("next")}}},[e("i",{staticClass:"fa-solid fa-chevron-right"})])]):t._e()])])])}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("td",[t._v("Funcionário")]),t._v(" "),e("td",[t._v("Cargo")]),t._v(" "),e("td",[t._v("Situação")]),t._v(" "),e("td",[t._v("Possui usuário")]),t._v(" "),e("td",[t._v("Dependentes")]),t._v(" "),e("td",[t._v("Perfil")])])])}],!1,null,null,null).exports},900:(t,e,i)=>{function a(t,e,i,a,n,s,o,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),a&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):n&&(l=r?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var p=c.render;c.render=function(t,e){return l.call(e),p(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}i.d(e,{Z:()=>a})}}]);