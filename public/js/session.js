"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[507],{632:(t,s,a)=>{a.r(s),a.d(s,{default:()=>o});const e={components:{},directives:{},props:["session_user"],data:function(){return{old_pass:"",new_pass:""}},computed:{},watch:{},created:function(){this.getUser()},mounted:function(){},updated:function(){},activated:function(){},deactivated:function(){},methods:{getUser:function(){var t=this;api.getSessionUser().then((function(s){s.data.session_started?t.$emit("setSessionUser",s.data.session_user):console.log(s.data)})).catch((function(s){console.log(s),t.$emit("showAlert","error","Ocorreu um erro no processo: ".concat(s))})).finally((function(){}))},openLogoutModal:function(){bootstrap.Modal.getOrCreateInstance(this.$refs.logoutModal).show()},logout:function(){var t=this;bootstrap.Modal.getOrCreateInstance(this.$refs.logoutModal).hide(),this.$emit("isLoading",!0),api.logout(this.session_user.id_user).then((function(s){s.data.session_ended?(t.$emit("showAlert","success","Sessão encerrada com sucesso."),setTimeout((function(){window.location.href="".concat(window.location.origin,"/login")}),1e3)):t.$emit("showAlert","error","Sessão do usuário não encontrada.")})).catch((function(s){console.log(s),t.$emit("showAlert","error","Ocorreu um erro no processo: ".concat(s))})).finally((function(){t.$emit("isLoading",!1)}))},openAlterPassModal:function(){bootstrap.Modal.getOrCreateInstance(this.$refs.alterPassModal).show()},alterPass:function(){var t=this;return""==this.old_pass||""==this.new_pass?this.$emit("showAlert","warning","Senha atual e senha nova devem ser preenchidas."):this.old_pass==this.new_pass?this.$emit("showAlert","warning","Senha atual e senha nova não podem ser iguais."):(bootstrap.Modal.getOrCreateInstance(this.$refs.alterPassModal).hide(),this.$emit("isLoading",!0),void api.alterPass(this.session_user.id_user,this.old_pass,this.new_pass).then((function(s){if(s.data.success)t.$emit("showAlert","success","Senha alterada com sucesso.");else switch(s.data.error){case"old_pass":t.$emit("showAlert","error","Senha atual inválida.");break;case"new_pass":t.$emit("showAlert","error","Senha nova é igual a senha atual.");break;case"sql":t.$emit("showAlert","error","SQL inválido, informe o suporte.")}})).catch((function(s){console.log(s),t.$emit("showAlert","error","Ocorreu um erro no processo: ".concat(s))})).finally((function(){t.old_pass="",t.new_pass="",t.$emit("isLoading",!1)})))}}};const o=(0,a(900).Z)(e,(function(){var t=this,s=t._self._c;return s("div",[s("div",{ref:"alterPassModal",staticClass:"modal fade",attrs:{id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content bg-dark text-light"},[t._m(0),t._v(" "),s("div",{staticClass:"modal-body bd-callout bd-callout-info"},[s("div",{staticClass:"hstack gap-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.old_pass,expression:"old_pass"}],staticClass:"form-control",attrs:{type:"password",placeholder:"senha atual"},domProps:{value:t.old_pass},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.alterPass.apply(null,arguments)},input:function(s){s.target.composing||(t.old_pass=s.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.new_pass,expression:"new_pass"}],staticClass:"form-control",attrs:{type:"password",placeholder:"senha nova"},domProps:{value:t.new_pass},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.alterPass.apply(null,arguments)},input:function(s){s.target.composing||(t.new_pass=s.target.value)}}})])]),t._v(" "),s("div",{staticClass:"modal-footer border border-info border-opacity-25"},[s("button",{staticClass:"btn btn-info",attrs:{"data-bs-dismiss":"modal"}},[t._v("\n            Cancelar\n          ")]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-orange",attrs:{disabled:""==t.old_pass||""==t.new_pass||t.old_pass==t.new_pass},on:{click:t.alterPass}},[t._v("Alterar")])])])])]),t._v(" "),s("div",{ref:"logoutModal",staticClass:"modal fade",attrs:{id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content bg-dark text-light"},[t._m(1),t._v(" "),s("div",{staticClass:"modal-body bd-callout bd-callout-warning"},[t._v("\n          Deseja mesmo sair do sistema?\n        ")]),t._v(" "),s("div",{staticClass:"modal-footer border border-warning border-opacity-25"},[s("button",{staticClass:"btn btn-info",attrs:{"data-bs-dismiss":"modal"}},[t._v("\n            Cancelar\n          ")]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-orange",on:{click:t.logout}},[t._v("Sair")])])])])])])}),[function(){var t=this,s=t._self._c;return s("div",{staticClass:"modal-header border border-info border-opacity-25"},[s("a",{staticClass:"navbar-brand d-flex align-items-center",attrs:{href:"#"}},[s("img",{staticClass:"rounded me-2",attrs:{src:"/img/nav.png",alt:"Logo",width:"38",height:"38"}}),t._v("\n            Xpert\n          ")]),t._v(" "),s("h1",{staticClass:"modal-title fs-5",attrs:{id:"staticBackdropLabel"}},[t._v("Alterar Senha")]),t._v(" "),s("button",{staticClass:"btn-close btn-close-white m-0",attrs:{"data-bs-dismiss":"modal"}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"modal-header border border-warning border-opacity-25"},[s("a",{staticClass:"navbar-brand d-flex align-items-center",attrs:{href:"#"}},[s("img",{staticClass:"rounded me-2",attrs:{src:"/img/nav.png",alt:"Logo",width:"38",height:"38"}}),t._v("\n            Xpert\n          ")]),t._v(" "),s("h1",{staticClass:"modal-title fs-5",attrs:{id:"staticBackdropLabel"}},[t._v("Encerrar sessão")]),t._v(" "),s("button",{staticClass:"btn-close btn-close-white m-0",attrs:{"data-bs-dismiss":"modal"}})])}],!1,null,null,null).exports},900:(t,s,a)=>{function e(t,s,a,e,o,n,r,i){var l,d="function"==typeof t?t.options:t;if(s&&(d.render=s,d.staticRenderFns=a,d._compiled=!0),e&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=l):o&&(l=i?function(){o.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(t,s){return l.call(s),c(t,s)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:d}}a.d(s,{Z:()=>e})}}]);